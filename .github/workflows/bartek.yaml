name: bartek

on: [push]

jobs:
  build:
    name: build
    runs-on: [self-hosted]

    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
      
      - name: Check signature
        run: |
          git verify-commit HEAD
      
      - name: Package extension
        run: |
          dt ext build --extension-directory . --target-directory /tmp/build

      - name: Sign
        run: |
          echo "now connecting to signing service and signing the extension"
      
      - name: Deploy artifact
        run: |
          echo "Pushing to artifact storage (and gh releases?)"
          
